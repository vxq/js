-function(window, module) {
'use strict';var l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function m(){l.Symbol||(l.Symbol=n);m=function(){}}var p=0;function n(b){return"jscomp_symbol_"+b+p++}function t(){m();l.Symbol.iterator||(l.Symbol.iterator=l.Symbol("iterator"));t=function(){}}function u(b){t();if(b[l.Symbol.iterator])return b[l.Symbol.iterator]();var a=0;return{next:function(){return a==b.length?{done:!0}:{done:!1,value:b[a++]}}}}
function v(b){for(var a,c=[];!(a=b.next()).done;)c.push(a.value);return c};function w(b,a){if(!b)throw Error((void 0===a?null:a)||"Assertion failed");}function x(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];console.log.apply(console,[].concat(a instanceof Array?a:v(u(a))))};function y(){this.b=[];this.a=[]}y.prototype.add=function(b){var a={};this.a.push(a);this.b.push(b);return function(){var b=this.a.indexOf(a);this.b.splice(b,1);this.a.splice(b,1)}.bind(this)};y.prototype.call=function(){for(var b=u(this.b),a=b.next();!a.done;a=b.next())a=a.value,a()};function z(b){b=b.getBoundingClientRect();return!(0>b.bottom||0>b.right||b.top>window.innerHeight||b.left>window.innerWidth)};function A(b,a,c){this.width=b;this.height=a;this.a=new Set(c);this.changeCallbacks=new y}Object.defineProperties(A.prototype,{agents:{configurable:!0,enumerable:!0,get:function(){return this.a}}});function B(){this.y=this.x=50;this.a=this.z=0;this.changeCallbacks=new y}function C(b,a){w(Number.isFinite(a));b.a-=a}function D(b,a){w(Number.isFinite(a));b.goTo(b.x+a*b.h,b.y+a*b.i,b.z)}
B.prototype.goTo=function(b,a,c){w(Number.isFinite(b));w(Number.isFinite(a));w(Number.isFinite(c));c=b-this.x;for(var e=a-this.y,q=Math.ceil(Math.sqrt(c*c+e*e)/4),I=0;I<q;I++)this.x+=c/q,this.y+=e/q,this.changeCallbacks.call();this.x=b;this.y=a;this.changeCallbacks.call();return Promise.resolve()};Object.defineProperties(B.prototype,{h:{configurable:!0,enumerable:!0,get:function(){return-Math.sin(2*this.a*Math.PI)}},i:{configurable:!0,enumerable:!0,get:function(){return Math.cos(2*this.a*Math.PI)}}});function E(b,a){w(Number.isFinite(b),"x = "+b+" must be a finite number");w(Number.isFinite(a),"y = "+a+" must be a finite number");this.x=b;this.y=a}function F(b){return Math.sqrt(b.x*b.x+b.y*b.y)}function G(b,a){w(Number.isFinite(a),"magnitude = "+a+" must be a finite number");var c=F(b);return 0!==c?b.scale(a/c):H(0,0)}E.prototype.scale=function(b){w(Number.isFinite(b),"magnitude = "+b+" must be a finite number");return 0==b||0==this.x&&0==this.y?H(0,0):H(b*this.x,b*this.y)};
E.prototype.add=function(b){return H(this.x+b.x,this.y+b.y)};E.prototype.toString=function(){return"V("+this.x+", "+this.y+")"};var J,H=J=function(b,a){return new E(b,a)};function K(b,a){var c=this;this.width=b;this.height=a;this.changeCallbacks=new y;this.a=new Set;var e=+new Date;setInterval(function(){var b=+new Date,a=(b-e)/1E3;e=b;if(!(0>=a)){for(var b=new Map,g=u(c.a),d=g.next();!d.done;d=g.next())b.set(d.value,J(0,0));g=u(c.a);for(d=g.next();!d.done;d=g.next())for(var k=d.value,d=u(c.a),h=d.next();!h.done;h=d.next())if(h=h.value,k!==h){var r=h.b,f=k.b,r=H(r.x-f.x,r.y-f.y),f=F(r);40>f&&(f=40);h=G(r,1).scale(6.67408*k.c*h.c/Math.pow(f,2));b.set(k,b.get(k).add(h))}g=
[];k=u(c.a);for(d=k.next();!d.done;d=k.next())d=d.value,h=d.c*d.g,r=b.get(d),f=r.scale(a/h),console.log("dV from forces "+f),d.a=d.a.add(f),f=F(d.a),f=Math.max(0,f-a*f*.05),10<=f||100<F(r)/h?(console.log(String(f)),d.a=G(d.a,f)):d.a=J(0,0),0<F(d.a)&&(h=d.a.scale(a),d.b=d.b.add(h),g.push(d));for(a=0;a<g.length-1;a++)b=g[a],k=a+Math.floor(Math.random()*g.length-a),g[a]=g[k],g[k]=b;a=u(g);for(d=a.next();!d.done;d=a.next())d.value.changeCallbacks.call()}},20)}
Object.defineProperties(K.prototype,{agents:{configurable:!0,enumerable:!0,get:function(){return new Set(this.a)}}});function L(b,a,c){this.b=J(void 0===a?0:a,void 0===c?0:c);this.a=J(0,0);this.c=1E4;this.g=1;this.f=null;this.changeCallbacks=new y}L.prototype.goTo=function(b,a,c){var e=this;if(this.f){var q=function(){return e.goTo(b,a,c)};return this.f.then(q,q)}return this.f=new Promise(function(a){return a()})};
Object.defineProperties(L.prototype,{x:{configurable:!0,enumerable:!0,get:function(){return this.b.x}},y:{configurable:!0,enumerable:!0,get:function(){return this.b.y}},z:{configurable:!0,enumerable:!0,get:function(){return 0}}});function M(b,a){var c=b+" !== "+a;if(b!==a)throw Error((void 0===c?null:c)||"Assertion failed");};function N(b,a){var c=this;this.c=1E3*Math.random();this.b=b;this.a=a;this.cancel=a.changeCallbacks.add(function(){if(z(c.b.b)){var a=c.b.c;a.fillStyle="rgba(0, 0, 0, 0.25)";a.beginPath();a.arc(c.a.x,c.a.y,8,0,2*Math.PI);a.fill();a.fillStyle="hsla("+c.c+", 50%, 50%, 0.5)";a.strokeStyle="rgba(255, 255, 255, 0.5)";a.beginPath();a.arc(c.a.x,c.a.y,6,0,2*Math.PI);a.fill();a.stroke()}})}
function O(b){var a=this;this.a=b;this.b=document.createElement("canvas");this.b.width=this.a.width;this.b.height=this.a.height;this.c=this.b.getContext("2d");this.c.fillStyle="black";this.c.fillRect(0,0,this.a.width,this.a.height);this.f=new Map;this.g();this.a.changeCallbacks.add(this.g.bind(this));var c=+new Date;setInterval(function(){var b=+new Date,q=(b-c)/1E3;c=b;z(a.b)?a.c.fillStyle="rgba(0, 0, 0, "+.25*q+")":a.c.fillStyle="black";a.c.fillRect(0,0,a.a.width,a.a.height)},100)}
O.prototype.g=function(){for(var b=u(this.f),a=b.next();!a.done;a=b.next())a.value.cancel();this.f=new Map;b=u(this.a.agents);for(a=b.next();!a.done;a=b.next())a=a.value,this.f.set(a,new N(this,a))};function P(){}P.prototype.test=function(){x("Let's testTheTurtles()!");Q()};P.prototype.addFlatCanvasWithTurtles=function(b){var a=new A(512,512,[]),c=new O(a);b.appendChild(c.b);Q(a);return a};
P.prototype.addFlatCanvasWithFlatland=function(b){function a(){return.5+(Math.random()+Math.random()+Math.random())/3}var c=new K(512,512),e=new O(c);b.appendChild(e.b);b=new L(0,150,50);b.a=J(100,-15);c.a.add(b);b=new L(0,400,200);b.a=J(8,150);c.a.add(b);b=new L(0,150,175);b.a=J(-25,125);c.a.add(b);for(b=0;4>b;b++)e=new L(0,200+50*a(),200+50*a()),e.c*=10,e.g*=10,e.a=J(5-10*a(),5-10*a()),c.a.add(e);c.changeCallbacks.call();return c};
function Q(b){b=void 0===b?new A(512,512,[]):b;var a=new B;b.a.add(a);b.changeCallbacks.call();M(50,a.x);M(50,a.y);D(a,50);M(50,a.x);M(100,a.y);w(Number.isFinite(.25));a.a+=.25;D(a,25);M(25,a.x);M(100,a.y);C(a,.375);D(a,100);for(b=0;12>b;b++)C(a,.0625),D(a,10);D(a,100);C(a,.25);D(a,200);for(b=0;6>b;b++)C(a,.0625),D(a,10);D(a,50);console.log("Test complete.")}var R=new P;"object"===typeof module&&null!=module&&(module.exports=R);"object"===typeof window&&null!=window&&(window.vxq=R);
}.call(typeof window == 'object' ? window: typeof this == 'object' ? this: null,typeof window == 'object' ? window : null,typeof module == 'object' ? module : null)
