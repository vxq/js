-function(window, module) {
'use strict';var k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function l(){k.Symbol||(k.Symbol=n);l=function(){}}var p=0;function n(b){return"jscomp_symbol_"+b+p++}function r(){l();k.Symbol.iterator||(k.Symbol.iterator=k.Symbol("iterator"));r=function(){}}function t(b){r();if(b[k.Symbol.iterator])return b[k.Symbol.iterator]();var a=0;return{next:function(){return a==b.length?{done:!0}:{done:!1,value:b[a++]}}}}
function u(b){for(var a,c=[];!(a=b.next()).done;)c.push(a.value);return c};function v(b,a){if(!b)throw Error((void 0===a?null:a)||"Assertion failed");}function w(b){for(var a=[],c=0;c<arguments.length;++c)a[c-0]=arguments[c];console.log.apply(console,[].concat(a instanceof Array?a:u(t(a))))};function x(){this.b=[];this.a=[]}x.prototype.add=function(b){var a={};this.a.push(a);this.b.push(b);return function(){var b=this.a.indexOf(a);this.b.splice(b,1);this.a.splice(b,1)}.bind(this)};x.prototype.call=function(){for(var b=t(this.b),a=b.next();!a.done;a=b.next())a=a.value,a()};function y(b){b=b.getBoundingClientRect();return!(0>b.bottom||0>b.right||b.top>window.innerHeight||b.left>window.innerWidth)};function z(b,a,c){this.width=b;this.height=a;this.a=new Set(c);this.changeCallbacks=new x}Object.defineProperties(z.prototype,{agents:{configurable:!0,enumerable:!0,get:function(){return this.a}}});function A(){this.y=this.x=50;this.a=this.z=0;this.changeCallbacks=new x}function B(b,a){v(Number.isFinite(a));b.a-=a}function C(b,a){v(Number.isFinite(a));b.goTo(b.x+a*b.h,b.y+a*b.i,b.z)}
A.prototype.goTo=function(b,a,c){v(Number.isFinite(b));v(Number.isFinite(a));v(Number.isFinite(c));c=b-this.x;for(var h=a-this.y,q=Math.ceil(Math.sqrt(c*c+h*h)/4),G=0;G<q;G++)this.x+=c/q,this.y+=h/q,this.changeCallbacks.call();this.x=b;this.y=a;this.changeCallbacks.call();return Promise.resolve()};Object.defineProperties(A.prototype,{h:{configurable:!0,enumerable:!0,get:function(){return-Math.sin(2*this.a*Math.PI)}},i:{configurable:!0,enumerable:!0,get:function(){return Math.cos(2*this.a*Math.PI)}}});function D(b,a){return new E(b,a)}function E(b,a){v(Number.isFinite(b),"x = "+b+" must be a finite number");v(Number.isFinite(a),"y = "+a+" must be a finite number");this.x=b;this.y=a}function F(b){return Math.sqrt(b.x*b.x+b.y*b.y)}function H(b,a){v(Number.isFinite(a),"magnitude = "+a+" must be a finite number");var c=F(b);return 0!==c?b.scale(a/c):D(0,0)}
E.prototype.scale=function(b){v(Number.isFinite(b),"magnitude = "+b+" must be a finite number");return 0==b||0==this.x&&0==this.y?D(0,0):D(b*this.x,b*this.y)};E.prototype.add=function(b){return D(this.x+b.x,this.y+b.y)};E.prototype.toString=function(){return"V("+this.x+", "+this.y+")"};
function I(b,a){var c=this;this.width=b;this.height=a;this.changeCallbacks=new x;this.a=new Set;var h=+new Date;setInterval(function(){var b=+new Date,a=(b-h)/1E3;h=b;if(!(0>=a)){for(var b=new Map,g=t(c.a),d=g.next();!d.done;d=g.next())b.set(d.value,D(0,0));g=t(c.a);for(d=g.next();!d.done;d=g.next())for(var m=d.value,d=t(c.a),e=d.next();!e.done;e=d.next())if(e=e.value,m!==e){var e=e.b,f=m.b,e=D(e.x-f.x,e.y-f.y),f=F(e);40>f&&(f=40);e=H(e,1).scale(66740.8*1E15/Math.pow(f,2));b.set(m,b.get(m).add(e))}g=
[];m=t(c.a);for(d=m.next();!d.done;d=m.next())d=d.value,e=b.get(d),f=e.scale(a/1E15),console.log("dV from forces "+f),d.a=d.a.add(f),f=F(d.a),f=Math.max(0,f-a*f*.05),10<=f||10<F(e)/1E15?(console.log(String(f)),d.a=H(d.a,f)):d.a=D(0,0),0<F(d.a)&&(e=d.a.scale(a),d.b=d.b.add(e),g.push(d));for(a=0;a<g.length-1;a++)b=g[a],m=a+Math.floor(Math.random()*g.length-a),g[a]=g[m],g[m]=b;a=t(g);for(d=a.next();!d.done;d=a.next())d.value.changeCallbacks.call()}},20)}
Object.defineProperties(I.prototype,{agents:{configurable:!0,enumerable:!0,get:function(){return new Set(this.a)}}});function J(b,a,c){this.b=D(void 0===a?0:a,void 0===c?0:c);this.a=D(0,0);this.c=null;this.changeCallbacks=new x}J.prototype.goTo=function(b,a,c){var h=this;if(this.c){var q=function(){return h.goTo(b,a,c)};return this.c.then(q,q)}return this.c=new Promise(function(a){return a()})};
Object.defineProperties(J.prototype,{x:{configurable:!0,enumerable:!0,get:function(){return this.b.x}},y:{configurable:!0,enumerable:!0,get:function(){return this.b.y}},z:{configurable:!0,enumerable:!0,get:function(){return 0}}});function K(b,a){var c=b+" !== "+a;if(b!==a)throw Error((void 0===c?null:c)||"Assertion failed");};function L(b,a){var c=this;this.c=1E3*Math.random();this.b=b;this.a=a;this.cancel=a.changeCallbacks.add(function(){if(y(c.b.b)){var a=c.b.c;a.fillStyle="rgba(0, 0, 0, 0.75)";a.beginPath();a.arc(c.a.x,c.a.y,8,0,2*Math.PI);a.fill();a.fillStyle="hsla("+c.c+", 50%, 50%, 1.0)";a.strokeStyle="rgba(255, 255, 255, 1.0)";a.beginPath();a.arc(c.a.x,c.a.y,6,0,2*Math.PI);a.fill();a.stroke()}})}
function M(b){var a=this;this.a=b;this.b=document.createElement("canvas");this.b.width=this.a.width;this.b.height=this.a.height;this.c=this.b.getContext("2d");this.c.fillStyle="black";this.c.fillRect(0,0,this.a.width,this.a.height);this.f=new Map;this.g();this.a.changeCallbacks.add(this.g.bind(this));var c=+new Date;setInterval(function(){var b=+new Date,q=(b-c)/1E3;c=b;y(a.b)?a.c.fillStyle="rgba(0, 0, 0, "+.5*q+")":a.c.fillStyle="black";a.c.fillRect(0,0,a.a.width,a.a.height)},100)}
M.prototype.g=function(){for(var b=t(this.f),a=b.next();!a.done;a=b.next())a.value.cancel();this.f=new Map;b=t(this.a.agents);for(a=b.next();!a.done;a=b.next())a=a.value,this.f.set(a,new L(this,a))};function N(){}N.prototype.test=function(){w("Let's testTheTurtles()!");O()};N.prototype.addFlatCanvasWithTurtles=function(b){var a=new z(512,512,[]),c=new M(a);b.appendChild(c.b);O(a);return a};
N.prototype.addFlatCanvasWithFlatland=function(b){function a(){return.5+(Math.random()+Math.random()+Math.random())/3}var c=new I(512,512),h=new M(c);b.appendChild(h.b);b=new J(0,50,50);b.a=D(150*a(),-50*a());c.a.add(b);b=new J(0,400,200);b.a=D(8*a(),200*a());c.a.add(b);b=new J(0,150,175);b.a=D(-4*a(),100*a());c.a.add(b);for(b=0;40>b;b++)h=new J(0,200+50*a(),200+50*a()),c.a.add(h);c.changeCallbacks.call();return c};
function O(b){b=void 0===b?new z(512,512,[]):b;var a=new A;b.a.add(a);b.changeCallbacks.call();K(50,a.x);K(50,a.y);C(a,50);K(50,a.x);K(100,a.y);v(Number.isFinite(.25));a.a+=.25;C(a,25);K(25,a.x);K(100,a.y);B(a,.375);C(a,100);for(b=0;12>b;b++)B(a,.0625),C(a,10);C(a,100);B(a,.25);C(a,200);for(b=0;6>b;b++)B(a,.0625),C(a,10);C(a,50);console.log("Test complete.")}var P=new N;"object"===typeof module&&null!=module&&(module.exports=P);"object"===typeof window&&null!=window&&(window.vxq=P);
}.call(typeof window == 'object' ? window: typeof this == 'object' ? this: null,typeof window == 'object' ? window : null,typeof module == 'object' ? module : null)
